<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Management API  Reference for commit-markable-resource</title>
  <link rel="stylesheet" href="../../../../styles.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
  <script src="../../../../scripts.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
<div class="container">
  <header class="card-header">
<div>
  <nav aria-label="Breadcrumb" class="breadcrumb">
    <ol>
      <li>
        <a href="../../../index.html">root</a>
      </li>
      <li>
        <a href="../../../subsystem/transactions/index.html">subsystem=transactions</a>
      </li>
      <li>commit-markable-resource</li>
    </ol>
  </nav>
</div>    <h1>Management API Reference for commit-markable-resource</h1>
    <p>Configures a datasource to be considered by the transaction manager as a CMR resource.  CMR is a non-XA database resource that can reliably participate in an XA transaction.</p>

  </header>
<h2>Attributes (4)</h2>
<ul class="attributes">
  <li>
    <span class="toggle-link">
      <a id="batch-size" href="#batch-size" class="">
         batch-size</a> - Configures number of ids placed within 'in' clause of the SQL query 'DELETE FROM ... WHERE xid in (...)' when periodic recovery processes the CMR database table garbage collection. When some garbage is left in the CMR database table after deletion another SQL delete is run during the next recovery cycle. When 'immediate-cleanup' is used this configuration has no big impact as the periodic recovery finds each time an empty CMR database table.
    </span>
    <div class="collapsible">


      <table>
        <tr>
          <td>Type</td>
          <td>INT</td>
        </tr>
        <tr>
          <td>Default Value</td>
          <td>100</td>
        </tr>
        <tr>
          <td>Is the attribute nillable?</td>
          <td>true</td>
        </tr>
        <tr>
          <td>Does the attribute allow expression?</td>
          <td>true</td>
        </tr>
        <tr>
          <td>Where is the attribute stored?</td>
          <td>configuration</td>
        </tr>
        <tr>
          <td>Access Type</td>
          <td>read-write</td>
        </tr>
        <tr>
          <td>Is restarted required?</td>
          <td>no-services</td>
        </tr>
        <tr>
          <td>Stability Level</td>
          <td>default</td>
        </tr>
        <tr>
          <td class="toggle-link">Raw DMR model</td>
          <td class="collapsible">
            <div class="code-block-container">
                            <pre><code class="language-json">
{
    "type" : {
        "TYPE_MODEL_VALUE" : "INT"
    },
    "description" : "Configures number of ids placed within 'in' clause of the SQL query 'DELETE FROM ... WHERE xid in (...)' when periodic recovery processes the CMR database table garbage collection. When some garbage is left in the CMR database table after deletion another SQL delete is run during the next recovery cycle. When 'immediate-cleanup' is used this configuration has no big impact as the periodic recovery finds each time an empty CMR database table.",
    "expressions-allowed" : true,
    "required" : false,
    "nillable" : true,
    "default" : 100,
    "stability" : "default",
    "access-type" : "read-write",
    "storage" : "configuration",
    "restart-required" : "no-services",
    "capability-reference" : null
}</code></pre>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </li>
  <li>
    <span class="toggle-link">
      <a id="immediate-cleanup" href="#immediate-cleanup" class="">
         immediate-cleanup</a> - Immediate cleanup of ids associated with this CMR resource after the end of the transaction. When set to false the garbage collection of the ids is processed by periodic recovery.
    </span>
    <div class="collapsible">


      <table>
        <tr>
          <td>Type</td>
          <td>BOOLEAN</td>
        </tr>
        <tr>
          <td>Default Value</td>
          <td>true</td>
        </tr>
        <tr>
          <td>Is the attribute nillable?</td>
          <td>true</td>
        </tr>
        <tr>
          <td>Does the attribute allow expression?</td>
          <td>true</td>
        </tr>
        <tr>
          <td>Where is the attribute stored?</td>
          <td>configuration</td>
        </tr>
        <tr>
          <td>Access Type</td>
          <td>read-write</td>
        </tr>
        <tr>
          <td>Is restarted required?</td>
          <td>no-services</td>
        </tr>
        <tr>
          <td>Stability Level</td>
          <td>default</td>
        </tr>
        <tr>
          <td class="toggle-link">Raw DMR model</td>
          <td class="collapsible">
            <div class="code-block-container">
                            <pre><code class="language-json">
{
    "type" : {
        "TYPE_MODEL_VALUE" : "BOOLEAN"
    },
    "description" : "Immediate cleanup of ids associated with this CMR resource after the end of the transaction. When set to false the garbage collection of the ids is processed by periodic recovery.",
    "expressions-allowed" : true,
    "required" : false,
    "nillable" : true,
    "default" : true,
    "stability" : "default",
    "access-type" : "read-write",
    "storage" : "configuration",
    "restart-required" : "no-services",
    "capability-reference" : null
}</code></pre>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </li>
  <li>
    <span class="toggle-link">
      <a id="jndi-name" href="#jndi-name" class="">
         jndi-name</a> - A JNDI name of the non-XA datasource which is made to be a CMR resource for the purpose of transaction manager participant handling. The datasource is required to be marked as 'connectable=true'.
    </span>
    <div class="collapsible">


      <table>
        <tr>
          <td>Type</td>
          <td>STRING</td>
        </tr>
        <tr>
          <td>Where is the attribute stored?</td>
          <td>configuration</td>
        </tr>
        <tr>
          <td>Access Type</td>
          <td>read-only</td>
        </tr>
        <tr>
          <td>Stability Level</td>
          <td>default</td>
        </tr>
        <tr>
          <td class="toggle-link">Raw DMR model</td>
          <td class="collapsible">
            <div class="code-block-container">
                            <pre><code class="language-json">
{
    "type" : {
        "TYPE_MODEL_VALUE" : "STRING"
    },
    "description" : "A JNDI name of the non-XA datasource which is made to be a CMR resource for the purpose of transaction manager participant handling. The datasource is required to be marked as 'connectable=true'.",
    "expressions-allowed" : false,
    "required" : true,
    "nillable" : false,
    "min-length" : 1,
    "max-length" : 2147483647,
    "stability" : "default",
    "access-type" : "read-only",
    "storage" : "configuration",
    "restart-required" : null,
    "capability-reference" : null
}</code></pre>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </li>
  <li>
    <span class="toggle-link">
      <a id="name" href="#name" class="">
         name</a> - Defines the database table name used for storing ids associated with this CMR resource. The default value for naming the database table is 'xids'.
    </span>
    <div class="collapsible">


      <table>
        <tr>
          <td>Type</td>
          <td>STRING</td>
        </tr>
        <tr>
          <td>Default Value</td>
          <td>xids</td>
        </tr>
        <tr>
          <td>Is the attribute nillable?</td>
          <td>true</td>
        </tr>
        <tr>
          <td>Does the attribute allow expression?</td>
          <td>true</td>
        </tr>
        <tr>
          <td>Where is the attribute stored?</td>
          <td>configuration</td>
        </tr>
        <tr>
          <td>Access Type</td>
          <td>read-write</td>
        </tr>
        <tr>
          <td>Is restarted required?</td>
          <td>no-services</td>
        </tr>
        <tr>
          <td>Stability Level</td>
          <td>default</td>
        </tr>
        <tr>
          <td class="toggle-link">Raw DMR model</td>
          <td class="collapsible">
            <div class="code-block-container">
                            <pre><code class="language-json">
{
    "type" : {
        "TYPE_MODEL_VALUE" : "STRING"
    },
    "description" : "Defines the database table name used for storing ids associated with this CMR resource. The default value for naming the database table is 'xids'.",
    "expressions-allowed" : true,
    "required" : false,
    "nillable" : true,
    "default" : "xids",
    "min-length" : 1,
    "max-length" : 2147483647,
    "stability" : "default",
    "access-type" : "read-write",
    "storage" : "configuration",
    "restart-required" : "no-services",
    "capability-reference" : null
}</code></pre>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </li>
</ul>
<h2>Operations (2)</h2>
<ul class="operations">
  <li>
    <span class="toggle-link">
      <a id="add" href="#add" class="">
      add</a> - Add a single CMR resource.
    </span>
    <div class="collapsible">


      <table>
        <thead>
        <tr>
          <th>Request Parameter</th>
          <th>Type</th>
          <th>Required</th>
          <th>Expressions Allowed</th>
          <th>Default value</th>
          <th>Description</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>batch-size</td>
          <td>INT</td>
          <td>false</td>
          <td>true</td>
          <td>100</td>
          <td>Configures number of ids placed within 'in' clause of the SQL query 'DELETE FROM ... WHERE xid in (...)' when periodic recovery processes the CMR database table garbage collection. When some garbage is left in the CMR database table after deletion another SQL delete is run during the next recovery cycle. When 'immediate-cleanup' is used this configuration has no big impact as the periodic recovery finds each time an empty CMR database table.</td>
        </tr>
        <tr>
          <td>immediate-cleanup</td>
          <td>BOOLEAN</td>
          <td>false</td>
          <td>true</td>
          <td>true</td>
          <td>Immediate cleanup of ids associated with this CMR resource after the end of the transaction. When set to false the garbage collection of the ids is processed by periodic recovery.</td>
        </tr>
        <tr>
          <td>name</td>
          <td>STRING</td>
          <td>false</td>
          <td>true</td>
          <td>xids</td>
          <td>Defines the database table name used for storing ids associated with this CMR resource. The default value for naming the database table is 'xids'.</td>
        </tr>
        </tbody>
      </table>


      <table>
        <tr>
          <td class="toggle-link">Raw DMR model</td>
          <td class="collapsible">
            <div class="code-block-container">
              <pre><code class="language-json">
{
    "operation-name" : "add",
    "description" : "Add a single CMR resource.",
    "request-properties" : {
        "batch-size" : {
            "type" : {
                "TYPE_MODEL_VALUE" : "INT"
            },
            "description" : "Configures number of ids placed within 'in' clause of the SQL query 'DELETE FROM ... WHERE xid in (...)' when periodic recovery processes the CMR database table garbage collection. When some garbage is left in the CMR database table after deletion another SQL delete is run during the next recovery cycle. When 'immediate-cleanup' is used this configuration has no big impact as the periodic recovery finds each time an empty CMR database table.",
            "expressions-allowed" : true,
            "required" : false,
            "nillable" : true,
            "default" : 100,
            "stability" : "default"
        },
        "immediate-cleanup" : {
            "type" : {
                "TYPE_MODEL_VALUE" : "BOOLEAN"
            },
            "description" : "Immediate cleanup of ids associated with this CMR resource after the end of the transaction. When set to false the garbage collection of the ids is processed by periodic recovery.",
            "expressions-allowed" : true,
            "required" : false,
            "nillable" : true,
            "default" : true,
            "stability" : "default"
        },
        "name" : {
            "type" : {
                "TYPE_MODEL_VALUE" : "STRING"
            },
            "description" : "Defines the database table name used for storing ids associated with this CMR resource. The default value for naming the database table is 'xids'.",
            "expressions-allowed" : true,
            "required" : false,
            "nillable" : true,
            "default" : "xids",
            "min-length" : 1,
            "max-length" : 2147483647,
            "stability" : "default"
        }
    },
    "reply-properties" : {},
    "stability" : "default",
    "read-only" : false,
    "restart-required" : "jvm",
    "runtime-only" : false
}</code></pre>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </li>
  <li>
    <span class="toggle-link">
      <a id="remove" href="#remove" class="">
      remove</a> - Remove a single CMR resource.
    </span>
    <div class="collapsible">




      <table>
        <tr>
          <td class="toggle-link">Raw DMR model</td>
          <td class="collapsible">
            <div class="code-block-container">
              <pre><code class="language-json">
{
    "operation-name" : "remove",
    "description" : "Remove a single CMR resource.",
    "request-properties" : {},
    "reply-properties" : {},
    "stability" : "default",
    "read-only" : false,
    "restart-required" : "jvm",
    "runtime-only" : false
}</code></pre>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </li>
</ul>
<h2>Galleon Features</h2>
<p>Galleon features are to be used when creating Galleon feature-packs.</p>
<ul class="attributes">
  <li>
  <span class="toggle-link">subsystem.transactions.commit-markable-resource</span>
  <div class="collapsible">
    <div class="code-block-container">
      <pre>
        <code id="feature" class="language-xml">
&lt;feature spec="subsystem.transactions.commit-markable-resource"&gt;
  &lt;param name="commit-markable-resource" value="{resource name}"/&gt;
  &lt;param name="batch-size" value="{value}"/&gt;
  &lt;param name="immediate-cleanup" value="{value}"/&gt;
  &lt;param name="name" value="{value}"/&gt;
&lt;feature/&gt;
        </code>
      </pre>
      <button class="copy-btn" onclick="copyToClipboard('feature')" title="Copy to clipboard">📋</button>
    </div>
  </div>
  </li>
</ul>
  <footer>
    <p>&copy; The WildFly authors 2025</p>
  </footer>
</div>
</body>
</html>